CREATE DATABASE QUANLYLUONGSANPHAM
USE QUANLYLUONGSANPHAM

CREATE TABLE PHONGBAN(
	MAPB NCHAR(8) PRIMARY KEY,
	TENPB NVARCHAR(40)
)

INSERT INTO PHONGBAN VALUES ('PB123456', N'Phòng Kĩ Thuật')
INSERT INTO PHONGBAN VALUES ('PB123457', N'Phòng Kế Toán')
INSERT INTO PHONGBAN VALUES ('PB123458', N'Phòng Giám Sát')

CREATE TABLE NHANVIENHANHCHANH(
	MANV NCHAR(8) PRIMARY KEY,
	HOTEN NVARCHAR(40),
	PHAI BIT,
	NGAYSINH DATETIME,
	NGAYTHAMGIACONGTAC DATETIME,
	TRINHDOCHUYENMON NVARCHAR(40),
	TRINHDONGOAINGU FLOAT,
	KINHNGHIEM NVARCHAR(40),
	CHUVU NVARCHAR(40),
	MAPB NCHAR(8) REFERENCES PHONGBAN(MAPB)
)
--ALTER TABLE NHANVIENHANHCHANH ALTER COLUMN KINHNGHIEM NVARCHAR(40)

INSERT INTO NHANVIENHANHCHANH VALUES('NV789476', N'Nguyễn Tuấn Hùng', '1',
 '2002-01-02', '2022-09-20', N'Đại Học', '4.1', '1 Năm', 'Nhân viên', 'PB123458')
 
INSERT INTO NHANVIENHANHCHANH VALUES('NV799454', N'Nguyễn Tuấn Hoàng', '1',
 '2002-01-03', '2022-09-20', N'Đại Học', '9.1', '1 Năm', 'Nhân viên', 'PB123458')
 
INSERT INTO NHANVIENHANHCHANH VALUES('NV785452', N'Nguyễn Thúy Hằng', '0',
 '2002-06-02', '2022-09-20', N'Đại Học', '7.1', '4 Năm', 'Nhân viên', 'PB123457')
 
INSERT INTO NHANVIENHANHCHANH VALUES('NV780455', N'Bùi Bằng Bằng', '1',
 '2002-08-01', '2022-09-20', N'Đại Học', '9.1', '6 Tháng', 'Nhân viên', 'PB123457')
CREATE TABLE TAIKHOAN(
	TAIKHOAN NCHAR(30) PRIMARY KEY,
	MATKHAU NCHAR(30),
	MANV NCHAR(8) REFERENCES NHANVIENHANHCHANH(MANV)
)

INSERT INTO TAIKHOAN VALUES('admin', 'admin', 'NV785452')

CREATE TABLE SANPHAM(
	MASP NCHAR(8) PRIMARY KEY,
	TENSP NVARCHAR(40),
	DONVITINH NVARCHAR(20),
	SOCONGDOAN INT
)
INSERT INTO SANPHAM VALUES('SP147258', 'Giày Nike', 'Đôi', 3)

CREATE TABLE CONGDOAN(
	MACD NCHAR(8) PRIMARY KEY,
	TENCD NVARCHAR(40),
	DONGIA FLOAT,
	MASP NCHAR(8) REFERENCES SANPHAM(MASP)
)

INSERT INTO CONGDOAN VALUES('CD739456', N'Khâu giày', 1000, 'SP147258')
INSERT INTO CONGDOAN VALUES('CD784356', N'Ráp giày', 1000, 'SP147258')
INSERT INTO CONGDOAN VALUES('CD739416', N'Cắt đế', 1000, 'SP147258')

CREATE TABLE HOPDONG(
	MAHD NCHAR(8) PRIMARY KEY,
	TENHD NVARCHAR(40),
	NGAYBATDAU DATETIME,
	NGAYKETTHUC DATETIME,
	SOLUONG INT,
	DOGIASANPHAM FLOAT,
	MASP NCHAR(8) REFERENCES SANPHAM(MASP)
)

INSERT INTO HOPDONG VALUES ('HD789456', N'Giày Nike'
, '2022-09-07', '2022-10-20', 150, 500000, 'SP147258')

CREATE TABLE CONGNHAN(
	MACN NCHAR(8) PRIMARY KEY,
	TENCN NVARCHAR(40),
	PHAI BIT,
	NGAYSINH DATETIME,
	NGAYTHAMGIACONGTAC DATETIME
)

INSERT INTO CONGNHAN VALUES('CN258369',
 N'Bùi Văn Hải', 1, '2002-05-30', '2022-03-21')
 
INSERT INTO CONGNHAN VALUES('CN251369',
 N'Dương Đại Hải', 1, '2002-09-03', '2022-03-21')
 
INSERT INTO CONGNHAN VALUES('CN253369',
 N'Huỳnh Ngọc Dũng', 1, '2003-01-21', '2022-03-21')
 
INSERT INTO CONGNHAN VALUES('CN256369',
 N'Bùi Nhất Duy', 1, '2002-01-23', '2022-03-21')
CREATE TABLE PHANCONG_CONGDOAN(
	MAPC NCHAR(8) PRIMARY KEY,
	MACN NCHAR(8) REFERENCES CONGNHAN(MACN),
	MACD NCHAR(8) REFERENCES CONGDOAN(MACD)
)

INSERT INTO PHANCONG_CONGDOAN VALUES('PC789335', 'CN251369', 'CD739456')
INSERT INTO PHANCONG_CONGDOAN VALUES('PC789363', 'CN256369', 'CD739456')
INSERT INTO PHANCONG_CONGDOAN VALUES('PC719365', 'CN251369', 'CD739456')

CREATE TABLE CHAMCONG_NHANVIENHANHCHANH(
	MACC_NVHC NCHAR(8) PRIMARY KEY,
	DIEMDANH BIT,
	TINHTRANHLAMVIEC NVARCHAR(30),
	NGAYHIENTAI DATETIME,
	SOGIOTANGCA INT,
	MANV NCHAR(8) REFERENCES NHANVIENHANHCHANH(MANV)
)

INSERT INTO CHAMCONG_NHANVIENHANHCHANH VALUES('CCNV7895', 1, N'Nguyên buổi', '2022-09-19', 0, 'NV789476')
CREATE TABLE LUONG_NHANVIENHANHCHANH(
	MALUONG_NVHC NCHAR(8) PRIMARY KEY,
	PHUCAP FLOAT,
	THUONG FLOAT,
	PHAT FLOAT,
	BHXH FLOAT,
	HESOLUONG FLOAT,
	MACC_NVHC NCHAR(8) REFERENCES CHAMCONG_NHANVIENHANHCHANH(MACC_NVHC)
)

INSERT INTO LUONG_NHANVIENHANHCHANH VALUES('MLNV4567', 50000, 50000, 0, 1000000, 1.45, 'CCNV7895')
CREATE TABLE BANGLUONG_NVHC(
	MABL_NVHC NCHAR(8) PRIMARY KEY,
	MANV NCHAR(8) REFERENCES NHANVIENHANHCHANH(MANV),
	MALUONG_NVHC NCHAR(8) REFERENCES LUONG_NHANVIENHANHCHANH(MALUONG_NVHC)
)

INSERT INTO BANGLUONG_NVHC VALUES ('BL789456', 'NV789476', 'MLNV4567')
CREATE TABLE CHAMCONG_CONGNHAN(
	MACC_CN NCHAR(8) PRIMARY KEY,
	DIEMDANH BIT,
	NGAYHIENTAI DATETIME,
	CALAMVIEC INT,
	SOCONGDOANHOANTHANH INT,
	MACN NCHAR(8) REFERENCES CONGNHAN(MACN)
)
--sp_rename 'chamcong_congnhan.sogiotangca', 'CALAMVIEC', 'column';
INSERT INTO CHAMCONG_CONGNHAN VALUES('CCCN3456', 1, '2022-09-19', 3, 34, 'CN256369')
CREATE TABLE LUONGCONGNHAN(
	MALUONG_CN NCHAR(8) PRIMARY KEY,
	PHUCAP FLOAT,
	THUONG FLOAT,
	PHAT FLOAT,
	BHXH FLOAT,
	MACC_CN NCHAR(8) REFERENCES CHAMCONG_CONGNHAN(MACC_CN),
	MACD NCHAR(8) REFERENCES CONGDOAN(MACD)
)

INSERT INTO LUONGCONGNHAN VALUES('MLCN4567', 500000, 500000, 0, 1000000, 'CCCN3456', 'CD739456')
CREATE TABLE BANGLUONG_CONGNHAN(
	MABL_CN NCHAR(8) PRIMARY KEY,
	MACN NCHAR(8) REFERENCES CONGNHAN(MACN),
	MALUONG_CN NCHAR(8) REFERENCES LUONGCONGNHAN(MALUONG_CN)
)

INSERT INTO BANGLUONG_CONGNHAN VALUES('BLCN7894', 'CN256369', 'MLCN4567')